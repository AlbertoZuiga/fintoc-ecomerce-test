{% extends 'base.html' %}

{% block title %}Compras pasadas{% endblock %}

{% block content %}
  <h1 class="text-2xl font-semibold mb-4">Compras pasadas</h1>

  {% if orders %}
    <div class="space-y-4">
      {% for order in orders %}
        <div class="bg-light-card dark:bg-dark-card p-4 rounded-lg border border-light-border dark:border-dark-border">
          <div class="flex justify-between items-start">
            <div>
              <div class="text-sm text-light-text-secondary dark:text-dark-text-secondary">Orden #{{ order.id }} — {{ order.created_at.strftime('%d/%m/%Y %H:%M') }}</div>
              <div class="mt-2">
                {% for item in order.items %}
                  <div class="flex justify-between text-sm py-1 border-t border-light-border dark:border-dark-border">
                    <div class="truncate">{{ item.product.name }} × {{ item.quantity }}</div>
                    <div>${{ '%.2f' | format((item.unit_price * item.quantity) / 100) }}</div>
                  </div>
                {% endfor %}
              </div>
            </div>
            <div class="text-right font-semibold">
              Total<br>
              ${{ '%.2f' | format(order.total_amount / 100) }}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-sm text-light-text-secondary dark:text-dark-text-secondary">No tienes compras registradas aún.</p>
  {% endif %}

{% endblock %}
